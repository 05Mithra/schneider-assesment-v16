<main>
  <div class="w-100 m-0 header-container">
    <h3 class="header-text">
      Global Engineering Management (GEM) - Robotics Process Automation
    </h3>
  </div>

  <div class="container mt-4">
    <div class="row">
      <div class="col-md-8">
        <div class="card custom-card mb-4">
          <div class="card-top-border"></div>
          <div class="card-header text-white">
            <h4 class="card-title mb-0">Process Expert IO Assignment - GEM</h4>
          </div>
          <div class="card-body">
            <!-- HW Mapping File upload 1 -->
            <div class="form-group mb-3">
              <label class="form-label">Select HW Mapping File:</label>
              <div class="d-flex">
                <input
                  type="file"
                  class="form-control me-2"
                  (change)="onFileSelect($event, 'hwMappingFile')"
                />
                <button
                  class="btn btn-outline-success"
                  (click)="onUpload('hwMappingFile')"
                  [disabled]="!hwMappingFile"
                >
                  Upload
                </button>
              </div>
            </div>

            <!-- Site Pending File upload 2 -->
            <div class="form-group mb-3">
              <label class="form-label">Select Site Pending File:</label>
              <div class="d-flex">
                <input
                  type="file"
                  class="form-control me-2"
                  (change)="onFileSelect($event, 'sitePendingFile')"
                />
                <button
                  class="btn btn-outline-success"
                  (click)="onUpload('sitePendingFile')"
                  [disabled]="!sitePendingFile"
                >
                  Upload
                </button>
              </div>
            </div>

            <!-- Input Table File upload 3 -->
            <div class="form-group mb-3">
              <label class="form-label">Select InputTable File:</label>
              <div class="d-flex">
                <input
                  type="file"
                  class="form-control me-2"
                  (change)="onFileSelect($event, 'inputTableFile')"
                />
                <button
                  class="btn btn-outline-success"
                  (click)="onUpload('inputTableFile')"
                  [disabled]="!inputTableFile"
                >
                  Upload
                </button>
              </div>
            </div>

            <div class="d-flex justify-content-between text-center mt-4">
              <button
                class="btn btn-light-green me-2"
                (click)="generateXRef()"
                [disabled]="!allFilesUploaded()"
              >
                Generate X-Ref
              </button>
              <button
                class="btn btn-primary"
                (click)="runProcess()"
                [disabled]="!allFilesUploaded()"
              >
                Run
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card custom-card mb-4">
          <div class="card-top-border"></div>
          <div class="card-body d-flex align-items-center">
            <p class="card-text">
              <b>Process Status </b><br />
              Please expect processing time from 5 - 10 min for IOs bigger than
              2000 IO
            </p>
            <div class="text-center">
              <button class="btn btn-light-green" (click)="checkStatus()">
                Status
              </button>
            </div>
          </div>
        </div>

        <div class="card custom-card mb-4">
          <div class="card-top-border"></div>
          <div class="card-body">
            <h5 class="card-title">Logs</h5>

            <div class="d-flex align-items-center justify-content-between mb-3">
              <div class="d-flex align-items-center">
                <i class="fas fa-filter me-2"></i>
                <span class="fw-bold">Filter by:</span>
              </div>
              <div class="btn-group">
                <button class="btn-info log-btn" (click)="filterLogs('info')">
                  Info
                </button>
                <button
                  class="btn-danger log-btn"
                  (click)="filterLogs('error')"
                >
                  Error
                </button>
                <button class="btn-danger log-btn" (click)="filterLogs('all')">
                  All
                </button>
              </div>
            </div>

            <div class="log-output" style="">
              <p *ngFor="let log of filteredLogs">
                {{ log.type | uppercase }} : {{ log.message }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
